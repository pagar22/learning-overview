## Sewy Seven list of cybersecurity measures implemented (and in progress)

1. **Single-Factor Phone Authentication:** Used Firebase phone authentication to securely login a user using an OTP, storing no other credentials in the database. Short-lived (1 hour) ID tokens and permanent refresh tokens that can be revoked easily. Need to use Secure Storage (instead of Async Storage) to encrypt stored tokens and prevent session hijacking (very important to prevent XSS attacks but need to work out config issues with Firebase and Expo).
2. **Firestore RBAC:** Very crucial authorization control. Wrote extensive Firestore security rules to restrict and regulate user access control. Combined this with nested DB schemas to specifically define the documents and data users have access to.
3. **TLS for Encryption in Transit:** All domains/subdomains are issued with a TLS certificate. The custom API URLs are mapped to the Cloud Run service. Communication with Firestore uses gRPC. All data in transit is consequently encrypted.
4. **App Check Client Certificate:** Firebase client configs and API keys are public by nature. Since the DB contains extremely valuable football information and read/writes can directly affect my costs, need to ensure that Firestore requests are only coming from my attested clients. Implemented App Check for Web that sends an app token along with each request to Firebase to ensure the appâ€™s authenticity (Native implementation is still in progress since I need to register as a business on the App Store and Play Store first).
5. **Remote Cloud Secrets Manager:** App Check needs a site key to be activated on the client. Adding the site key to the app would defeat the entire purpose of opacity. Implemented a secrets service with Expo to inject the key as an env variable into the app at built time instead. Also used GCP Secret Manager to establish a database connection at build time and locally for developers using IAM access credentials on the backend.
6. **Input Validation and Schemas:** Created holistic pydantic classes and wrote several validator functions to sanitise and validate data input. Simple middleware requires an API key header for updating football (non-user) data and handles rate limiting. Exception handling and logging to raise and monitor abnormal behaviour. Injection attacks are less likely as validation errors are thrown and data is normalised to strings before querying.
7. **GCP IAM:** Setup Cloud infrastructure with access rights for developers. Used the least privilege principle to reduce offline secret/env sharing and define roles properly. Simply authenticating with IAM CLI allows developers to pull secret versions into the code directly and connect to the db locally without any other unversioned files. Need to set up the same for Expo secrets on the client repo.
8. **Binary Authentication:** Less relevant with a small team but nice to have. Added binary authentication to enforce that new developer revisions that are pushed to the container registry are verified and that only verified images can be deployed to serve live traffic.
